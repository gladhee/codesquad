<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>GitHub PR 통계</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        .user-card { border: 1px solid #ccc; border-radius: 5px; padding: 15px; margin-bottom: 10px; }
        .label { font-weight: bold; }
    </style>
</head>
<body>

<h1>📊 GitHub PR 통계</h1>

<form method="get" action="/github-stats">
    사용자명: <input type="text" name="username" placeholder="아이디 입력" />
    <label><input type="checkbox" name="onlyStep" value="true" /> step 라벨 있음만</label>
    <label><input type="checkbox" name="onlySuccess" value="true" /> 정상 라벨 있음만</label>
    <button type="submit">검색</button>
</form>

<br>

<div th:each="entry : ${stats}">
    <div class="user-card">
        <p class="label">👤 사용자: <span th:text="${entry.key}"></span></p>
        <p>전체 PR: <span th:text="${entry.value.total}"></span></p>
        <p>병합됨: <span th:text="${entry.value.merged}"></span></p>
        <p>닫힘: <span th:text="${entry.value.closed}"></span></p>
        <p>✅ step 라벨 있음: <span th:text="${entry.value.stepLabelExists} ? '✅' : '❌'"></span></p>
        <p>✅ 정상 라벨 있음: <span th:text="${entry.value.successLabelExists} ? '✅' : '❌'"></span></p>
    </div>
</div>

</body>
</html>
